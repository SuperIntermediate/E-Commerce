import{Fb as p,O as u,a as o,b as a,ea as d}from"./chunk-HE5TQUO2.js";var h="ng_ecommerce_products_v1",l="ng_ecommerce_categories_v1",m=class n{products=d([]);categories=d([]);constructor(){let e=[{id:1,title:"Wireless Headphones",price:99.99,category:"Electronics",imageUrl:"https://picsum.photos/id/29/600/400",description:"Comfortable over-ear wireless headphones with noise cancellation and 20-hour battery life.",popularity:86,stock:100,reviews:[{user:"Alice",rating:5,comment:"Great sound and comfort!",date:"2024-06-12"},{user:"Bob",rating:4,comment:"Battery life is solid.",date:"2024-07-01"}]},{id:2,title:"Smart Watch",price:149.99,category:"Electronics",imageUrl:"https://picsum.photos/id/103/600/400",description:"Water-resistant smartwatch with heart-rate monitoring and GPS tracking.",popularity:120,stock:100,reviews:[{user:"Carol",rating:4,comment:"Love the fitness features.",date:"2024-05-20"},{user:"Dave",rating:3,comment:"Screen could be brighter.",date:"2024-06-02"}]},{id:3,title:"Denim Jacket",price:69.99,category:"Fashion",imageUrl:"https://picsum.photos/id/1060/600/400",description:"Classic denim jacket, perfect for layering across seasons.",popularity:54,stock:100,reviews:[{user:"Ella",rating:5,comment:"Fits perfectly!",date:"2024-03-10"}]},{id:4,title:"Espresso Machine",price:199.99,category:"Home",imageUrl:"https://picsum.photos/id/1062/600/400",description:"Compact espresso machine with milk frother for cafe-style drinks at home.",popularity:77,stock:100,reviews:[{user:"Frank",rating:4,comment:"Great crema and easy to use.",date:"2024-02-18"}]},{id:5,title:"Novel: The Wanderer",price:14.99,category:"Books",imageUrl:"https://picsum.photos/id/24/600/400",description:"A captivating journey through distant lands and self-discovery.",popularity:38,stock:100,reviews:[{user:"Gina",rating:3,comment:"Interesting story but slow start.",date:"2024-08-30"}]},{id:6,title:"Bluetooth Speaker",price:59.99,category:"Electronics",imageUrl:"https://picsum.photos/id/1063/600/400",description:"Portable speaker with deep bass and splash-proof design.",popularity:95,stock:100,reviews:[]},{id:7,title:"Running Shoes",price:79.99,category:"Fashion",imageUrl:"https://picsum.photos/id/21/600/400",description:"Lightweight running shoes designed for comfort and speed.",popularity:61,stock:100,reviews:[{user:"Henry",rating:5,comment:"Super comfortable for long runs.",date:"2024-04-14"}]},{id:8,title:"Air Fryer",price:129.99,category:"Home",imageUrl:"https://picsum.photos/id/1070/600/400",description:"Healthy frying with minimal oil; includes multiple cooking presets.",popularity:83,stock:100,reviews:[]}];try{let t=localStorage.getItem(h);if(t){let s=(JSON.parse(t)||[]).map(i=>a(o({},i),{stock:i.stock??100}));this.products.set(s.length?s:e)}else this.products.set(e)}catch{this.products.set(e)}try{let t=localStorage.getItem(l);if(t){let r=JSON.parse(t)||[];this.categories.set(r.length?r:this.deriveCategories())}else this.categories.set(this.deriveCategories())}catch{this.categories.set(this.deriveCategories())}p(()=>{try{localStorage.setItem(h,JSON.stringify(this.products()))}catch{}}),p(()=>{try{localStorage.setItem(l,JSON.stringify(this.categories()))}catch{}})}deriveCategories(){let e=new Set(this.products().map(t=>t.category));return Array.from(e).sort()}getAll(){return this.products()}getById(e){return this.products().find(t=>t.id===e)}getCategories(){return this.categories()}nextId(){let e=this.products();return e.length===0?1:Math.max(...e.map(t=>t.id))+1}create(e){let t=a(o({},e),{id:this.nextId()});return this.products.set([...this.products(),t]),this.categories.set(this.deriveCategories()),t}update(e){let t=this.products(),r=t.findIndex(i=>i.id===e.id);if(r<0)throw new Error("NOT_FOUND");let s=[...t];s[r]=e,this.products.set(s),this.categories.set(this.deriveCategories())}delete(e){this.products.set(this.products().filter(t=>t.id!==e)),this.categories.set(this.deriveCategories())}addCategory(e){let t=e.trim();if(!t)return;let r=new Set(this.categories());r.add(t),this.categories.set(Array.from(r).sort())}renameCategory(e,t){let r=e.trim(),s=t.trim();if(!r||!s||r===s)return;let i=this.products().map(c=>c.category===r?a(o({},c),{category:s}):c);this.products.set(i),this.categories.set(this.deriveCategories())}deleteCategory(e){let t=e.trim();t&&(this.products.set(this.products().map(r=>r.category===t?a(o({},r),{category:"Uncategorized"}):r)),this.categories.set(this.deriveCategories()))}addReview(e,t){let r=this.products(),s=r.findIndex(y=>y.id===e);if(s<0)return;let i=r[s],c=a(o({},i),{reviews:[...i.reviews,t]}),g=[...r];g[s]=c,this.products.set(g)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
