import{a as A}from"./chunk-BGPM6P37.js";import{a as W}from"./chunk-YFYQOU26.js";import{a as z}from"./chunk-YQELJHLD.js";import{a as j}from"./chunk-7GMC5TX5.js";import{a as U}from"./chunk-B7GYXW7L.js";import{c as V,e as N,f as q}from"./chunk-SV7RER2E.js";import{Fa as x,Ra as P,Sa as M,T as g,Ub as T,Va as h,Vb as I,Wa as f,Xa as l,Y as m,Ya as n,Z as u,Za as i,_a as y,cb as b,ea as v,eb as _,gb as s,hb as S,kb as r,lb as C,mb as k,nb as O,qa as w,sa as o,ub as E,wb as D,xb as R}from"./chunk-HE5TQUO2.js";var $=()=>["/products"],F=(a,t)=>t.date;function L(a,t){a&1&&(n(0,"p",2),r(1,"No reviews yet."),i())}function Q(a,t){if(a&1&&(n(0,"li",22)(1,"div",23)(2,"span"),r(3),i(),n(4,"span"),r(5),i()(),n(6,"p",24),r(7),i()()),a&2){let e=t.$implicit;o(3),C(e.user),o(2),O("",e.rating,"/5 \u2022 ",e.date),o(2),C(e.comment)}}function G(a,t){if(a&1&&(n(0,"ul",17),h(1,Q,8,4,"li",22,F),i()),a&2){let e=s(2);o(),f(e.product().reviews)}}function H(a,t){if(a&1){let e=b();n(0,"section",1)(1,"a",3),r(2,"\u2190 Back to Products"),i(),n(3,"div",4),y(4,"img",5),n(5,"div",6)(6,"h1"),r(7),i(),n(8,"p",7),r(9),D(10,"currency"),i(),n(11,"p",8),r(12),i(),n(13,"p",9),r(14),i()()(),n(15,"div",10)(16,"h2"),r(17),i(),n(18,"div",11)(19,"textarea",12),_("input",function(d){m(e);let p=s();return u(p.reviewComment.set((d.target.value||"").slice(0,500)))}),i(),n(20,"div",13)(21,"label"),r(22," Rating "),n(23,"select",14),_("change",function(d){m(e);let p=s();return u(p.reviewRating.set(+d.target.value||5))}),n(24,"option",15),r(25,"5"),i(),n(26,"option",15),r(27,"4"),i(),n(28,"option",15),r(29,"3"),i(),n(30,"option",15),r(31,"2"),i(),n(32,"option",15),r(33,"1"),i()()(),n(34,"button",16),_("click",function(){m(e);let d=s();return u(d.submitReview())}),r(35,"Submit Review"),i()()(),P(36,L,2,0,"p",2)(37,G,3,0,"ul",17),i(),n(38,"div",18)(39,"label"),r(40," Quantity "),n(41,"input",19,0),_("input",function(){m(e);let d=S(42),p=s();return u(p.quantity.set(d.valueAsNumber||1))}),i()(),n(43,"button",20),_("click",function(){m(e);let d=s();return u(d.toggleWishlist())}),r(44),i(),n(45,"button",21),_("click",function(){m(e);let d=s();return u(d.addToCart())}),r(46,"Add to Cart"),i()()()}if(a&2){let e=s();o(),l("routerLink",E(21,$)),o(3),l("src",e.product().imageUrl,w)("alt",e.product().title),o(3),C(e.product().title),o(2),C(R(10,19,e.product().price)),o(3),O("Category: ",e.product().category," \u2022 Popularity: ",e.product().popularity),o(2),C(e.product().description),o(3),k("Reviews (",e.product().reviews.length,")"),o(2),l("value",e.reviewComment()),o(4),l("value",e.reviewRating()),o(),l("value",5),o(2),l("value",4),o(2),l("value",3),o(2),l("value",2),o(2),l("value",1),o(4),M(e.product().reviews.length===0?36:37),o(5),l("value",e.quantity()),o(3),C(e.isWishlisted()?"Remove from Wishlist":"Add to Wishlist")}}function J(a,t){a&1&&(n(0,"p",2),r(1,"Product not found."),i())}var B=class a{route=g(V);productService=g(A);quantity=v(1);cart=g(U);auth=g(W);router=g(N);wishlist=g(j);product=v(null);reviewRating=v(5);reviewComment=v("");constructor(){let t=this.route.snapshot.paramMap.get("id"),e=t?Number(t):NaN,c=this.productService.getById(e);this.product.set(c??null)}addToCart(){let t=this.product();if(!t)return;let e=this.quantity();if(this.auth.isAuthenticated()){this.cart.add(z(t,e));return}let c=this.router.url||`/products/${t.id}`;this.router.navigate(["/login"],{queryParams:{redirectUrl:c,action:"add_to_cart",pid:t.id,qty:e}})}toggleWishlist(){let t=this.product();t&&this.wishlist.toggle(t)}isWishlisted(){let t=this.product();return t?this.wishlist.isWishlisted(t):!1}submitReview(){let t=this.product();if(!t)return;if(!this.auth.isAuthenticated()){let p=this.router.url||`/products/${t.id}`;this.router.navigate(["/login"],{queryParams:{redirectUrl:p,action:"write_review",pid:t.id}});return}let c={user:this.auth.user()?.name||"Anonymous",rating:this.reviewRating(),comment:this.reviewComment().trim(),date:new Date().toISOString().slice(0,10)};if(!c.comment)return;this.productService.addReview(t.id,c);let d=this.productService.getById(t.id);this.product.set(d??t),this.reviewRating.set(5),this.reviewComment.set("")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-product-details"]],decls:2,vars:1,consts:[["qty",""],[1,"details-page"],[1,"empty"],[1,"back",3,"routerLink"],[1,"hero"],[3,"src","alt"],[1,"info"],[1,"price"],[1,"meta"],[1,"desc"],[1,"reviews"],[1,"review-form"],["placeholder","Write your review...",3,"input","value"],[1,"controls"],[3,"change","value"],[3,"value"],[3,"click"],[1,"review-list"],[1,"actions"],["type","number","min","1",3,"input","value"],[1,"wish",3,"click"],[1,"add",3,"click"],[1,"review"],[1,"review-header"],[1,"review-comment"]],template:function(e,c){e&1&&P(0,H,47,22,"section",1)(1,J,2,0,"p",2),e&2&&M(c.product()?0:1)},dependencies:[I,q,T],styles:[".details-page[_ngcontent-%COMP%]{padding:1rem}.details-page[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;text-decoration:none}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;border-radius:.75rem}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#1b5e20;margin:0 0 .25rem}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin:0 0 .5rem}.details-page[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.95rem;color:#333}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{padding:1rem}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:300px;height:300px;object-fit:cover;border-radius:8px}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:1rem 0;color:var(--text-secondary)}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{background:var(--accent-color);color:var(--bg-primary);border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer}.details-page[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .wish[_ngcontent-%COMP%]{background:transparent;color:var(--accent-color);border:1px solid var(--accent-color);padding:.5rem 1rem;border-radius:6px;cursor:pointer}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]{margin-top:2rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.5rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;padding:.5rem;border-radius:6px;border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-primary)}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-form[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-form[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:6px;border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-primary)}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-form[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--accent-color);color:var(--bg-primary);border:none;padding:.4rem .8rem;border-radius:6px;cursor:pointer}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]{margin-top:1rem;display:grid;gap:.5rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-secondary)}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]   .review-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:600}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]   .review-comment[_ngcontent-%COMP%]{margin-top:.25rem;color:var(--text-secondary)}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{color:#666}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{border-top:1px solid #eee;padding:.75rem 0}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{font-weight:600}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-size:.85rem;color:#555;margin-bottom:.25rem}.details-page[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]   .review-list[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.hero[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{B as ProductDetailsComponent};
