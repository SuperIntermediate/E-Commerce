import{a as he}from"./chunk-RUAZL4YI.js";import{a as _}from"./chunk-YFYQOU26.js";import{a as me}from"./chunk-7GMC5TX5.js";import{a as ue}from"./chunk-B7GYXW7L.js";import{a as se,b as ce,d as le,e as f,f as pe,g as de}from"./chunk-SV7RER2E.js";import{B as w,Bb as re,Cb as ie,Fa as Q,Fb as oe,I as y,Ib as ae,L as b,M as q,Ma as ee,O as x,Oa as j,Qa as te,R as z,Ra as I,S as F,Sa as U,T as o,U as Z,Y as k,Ya as c,Z as M,Za as l,_ as X,_a as W,a as Y,cb as T,da as $,ea as E,eb as p,f as D,gb as g,i as R,jb as G,kb as d,lb as ne,mb as K,q as v,sa as m,w as h,x as V,xa as J}from"./chunk-HE5TQUO2.js";var B=(e,i)=>{let n=o(_),t=o(f);return n.isAuthenticated()?!0:t.createUrlTree(["/login"],{queryParams:{redirectUrl:i.url}})};var ge=(e,i)=>{let n=o(_),t=o(f);return n.isAdmin()?!0:n.isAuthenticated()?t.createUrlTree(["/account"]):t.createUrlTree(["/login"],{queryParams:{redirectUrl:i.url}})};var fe=(e,i)=>{let n=o(_),t=o(f);return n.isSeller()?!0:n.isAuthenticated()?t.createUrlTree(["/account"]):t.createUrlTree(["/login"],{queryParams:{redirectUrl:i.url}})};var _e=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",loadComponent:()=>import("./chunk-O3YO7DZK.js").then(e=>e.HomePageComponent)},{path:"products",loadComponent:()=>import("./chunk-WJOO4EQK.js").then(e=>e.ProductsListComponent)},{path:"products/:id",loadComponent:()=>import("./chunk-QOUFW4PP.js").then(e=>e.ProductDetailsComponent)},{path:"cart",loadComponent:()=>import("./chunk-NLGJBOTA.js").then(e=>e.CartPageComponent)},{path:"checkout",loadComponent:()=>import("./chunk-BTFJKPCX.js").then(e=>e.CheckoutPageComponent)},{path:"orders",canActivate:[B],loadComponent:()=>import("./chunk-EVHJ244Z.js").then(e=>e.OrdersPageComponent)},{path:"wishlist",loadComponent:()=>import("./chunk-Z25U6WTC.js").then(e=>e.WishlistPageComponent)},{path:"login",loadComponent:()=>import("./chunk-X4ICOVMA.js").then(e=>e.LoginPageComponent)},{path:"signup",loadComponent:()=>import("./chunk-P6UQ6CY5.js").then(e=>e.SignupPageComponent)},{path:"account",canActivate:[B],loadComponent:()=>import("./chunk-VG3RM2V7.js").then(e=>e.AccountPageComponent)},{path:"admin",canActivate:[ge],loadComponent:()=>import("./chunk-E2OGFL4U.js").then(e=>e.AdminDashboardComponent),children:[{path:"",pathMatch:"full",redirectTo:"products"},{path:"products",loadComponent:()=>import("./chunk-AFNOJ6LN.js").then(e=>e.AdminProductsComponent)},{path:"categories",loadComponent:()=>import("./chunk-5YNPKFOD.js").then(e=>e.AdminCategoriesComponent)},{path:"users",loadComponent:()=>import("./chunk-JHWPR2OY.js").then(e=>e.AdminUsersComponent)},{path:"orders",loadComponent:()=>import("./chunk-5S765T3W.js").then(e=>e.AdminOrdersComponent)},{path:"analytics",loadComponent:()=>import("./chunk-MCFIEPVZ.js").then(e=>e.AdminAnalyticsComponent)}]},{path:"seller",canActivate:[fe],loadComponent:()=>import("./chunk-F74XCPSL.js").then(e=>e.SellerDashboardComponent),children:[{path:"",pathMatch:"full",redirectTo:"products"},{path:"products",loadComponent:()=>import("./chunk-AFNOJ6LN.js").then(e=>e.AdminProductsComponent)},{path:"categories",loadComponent:()=>import("./chunk-5YNPKFOD.js").then(e=>e.AdminCategoriesComponent)},{path:"users",loadComponent:()=>import("./chunk-JHWPR2OY.js").then(e=>e.AdminUsersComponent)},{path:"orders",loadComponent:()=>import("./chunk-5S765T3W.js").then(e=>e.AdminOrdersComponent)},{path:"analytics",loadComponent:()=>import("./chunk-MCFIEPVZ.js").then(e=>e.AdminAnalyticsComponent)}]},{path:"**",redirectTo:"products"}];var H="Service workers are disabled or not supported by this browser",O=class{serviceWorker;worker;registration;events;constructor(i,n){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=new D(t=>t.error(new b(5601,!1)));else{let t=null,r=new R;this.worker=new D(u=>(t!==null&&u.next(t),r.subscribe(S=>u.next(S))));let a=()=>{let{controller:u}=i;u!==null&&(t=u,r.next(t))};i.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(y(()=>i.getRegistration().then(u=>{if(!u)throw new b(5601,!1);return u})));let s=new R;this.events=s.asObservable();let C=u=>{let{data:S}=u;S?.type&&s.next(S)};i.addEventListener("message",C),n?.get(j,null,{optional:!0})?.onDestroy(()=>{i.removeEventListener("controllerchange",a),i.removeEventListener("message",C)})}}postMessage(i,n){return new Promise(t=>{this.worker.pipe(w(1)).subscribe(r=>{r.postMessage(Y({action:i},n)),t()})})}postMessageWithOperation(i,n,t){let r=this.waitForOperationCompleted(t),a=this.postMessage(i,n);return Promise.all([a,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let n;return typeof i=="string"?n=t=>t.type===i:n=t=>i.includes(t.type),this.events.pipe(V(n))}nextEventOfType(i){return this.eventsOfType(i).pipe(w(1))}waitForOperationCompleted(i){return new Promise((n,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(V(r=>r.nonce===i),w(1),v(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:n,error:t})})}get isEnabled(){return!!this.serviceWorker}},Oe=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new R;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=h,this.notificationClicks=h,this.notificationCloses=h,this.pushSubscriptionChanges=h,this.subscription=h;return}this.messages=this.sw.eventsOfType("PUSH").pipe(v(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(v(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(v(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(v(r=>r.data)),this.pushManager=this.sw.registration.pipe(v(r=>r.pushManager));let t=this.pushManager.pipe(y(r=>r.getSubscription()));this.subscription=new D(r=>{let a=t.subscribe(r),s=this.subscriptionChanges.subscribe(r);return()=>{a.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(H));let t={userVisibleOnly:!0},r=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)a[s]=r.charCodeAt(s);return t.applicationServerKey=a,new Promise((s,C)=>{this.pushManager.pipe(y(P=>P.subscribe(t)),w(1)).subscribe({next:P=>{this.subscriptionChanges.next(P),s(P)},error:C})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(H));let n=t=>{if(t===null)throw new b(5602,!1);return t.unsubscribe().then(r=>{if(!r)throw new b(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,r)=>{this.subscription.pipe(w(1),y(n)).subscribe({next:t,error:r})})}decodeBase64(n){return atob(n)}static \u0275fac=function(t){return new(t||e)(F(O))};static \u0275prov=x({token:e,factory:e.\u0275fac})}return e})(),Pe=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=h,this.unrecoverable=h;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(H));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new b(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(t){return new(t||e)(F(O))};static \u0275prov=x({token:e,factory:e.\u0275fac})}return e})();var be=new z("");function ye(){let e=o(A);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let i=o(be),n=o(J),t=o(j);n.runOutsideAngular(()=>{let r=navigator.serviceWorker,a=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",a),t.onDestroy(()=>{r.removeEventListener("controllerchange",a)})}),n.runOutsideAngular(()=>{let r,{registrationStrategy:a}=e;if(typeof a=="function")r=new Promise(s=>a().subscribe(()=>s()));else{let[s,...C]=(a||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Ce(+C[0]||0);break;case"registerWhenStable":r=Promise.race([t.whenStable(),Ce(+C[0])]);break;default:throw new b(5600,!1)}}r.then(()=>{t.destroyed||navigator.serviceWorker.register(i,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(q(5604,!1)))})})}function Ce(e){return new Promise(i=>setTimeout(i,e))}function xe(e,i){return new O(e.enabled!==!1?navigator.serviceWorker:void 0,i)}var A=class{enabled;updateViaCache;type;scope;registrationStrategy};function ke(e,i={}){return Z([Oe,Pe,{provide:be,useValue:e},{provide:A,useValue:i},{provide:O,useFactory:xe,deps:[A,X]},ee(ye)])}var Me={providers:[$(),re({eventCoalescing:!0}),de(_e),{provide:ie,useValue:"INR"},ke("ngsw-worker.js",{enabled:!ae(),registrationStrategy:"registerWhenStable:30000"})]};var we="ng_ecommerce_theme_v1",L=class e{theme=E("light");constructor(){try{let i=localStorage.getItem(we);if(i==="dark"||i==="light")this.theme.set(i);else{let n=window.matchMedia?.("(prefers-color-scheme: dark)").matches;this.theme.set(n?"dark":"light")}}catch{this.theme.set("light")}oe(()=>{let i=this.theme();this.applyTheme(i);try{localStorage.setItem(we,i)}catch{}})}isDark(){return this.theme()==="dark"}toggle(){this.theme.set(this.isDark()?"light":"dark")}set(i){this.theme.set(i)}applyTheme(i){let n="theme-dark",t=document.body;t&&(i==="dark"?t.classList.add(n):t.classList.remove(n))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ee(e,i){if(e&1){let n=T();c(0,"a",17),p("click",function(){k(n);let r=g(2);return M(r.closeMenu())}),d(1,"Admin"),l()}}function Te(e,i){if(e&1){let n=T();c(0,"a",18),p("click",function(){k(n);let r=g(2);return M(r.closeMenu())}),d(1,"Seller"),l()}}function Ae(e,i){if(e&1){let n=T();I(0,Ee,2,0,"a",14),I(1,Te,2,0,"a",15),c(2,"a",16),p("click",function(){k(n);let r=g();return M(r.closeMenu())}),d(3,"Account"),l(),c(4,"button",11),p("click",function(){k(n);let r=g();return r.auth.logout(),M(r.closeMenu())}),d(5,"Logout"),l()}if(e&2){let n=g();U(n.auth.isAdmin()?0:-1),m(),U(n.auth.isSeller()?1:-1)}}function Se(e,i){if(e&1){let n=T();c(0,"a",19),p("click",function(){k(n);let r=g();return M(r.closeMenu())}),d(1,"Login"),l(),c(2,"a",20),p("click",function(){k(n);let r=g();return M(r.closeMenu())}),d(3,"Signup"),l()}}var N=class e{title=E("angular-shopping-site");cart=o(ue);auth=o(_);theme=o(L);wishlist=o(me);menuOpen=E(!1);router=o(f);session=o(he);constructor(){this.router.events.subscribe(i=>{i instanceof ce&&this.session.setLastUrl(this.router.url)})}toggleMenu(){this.menuOpen.update(i=>!i)}closeMenu(){this.menuOpen.set(!1)}onKeydown(i){i.key==="Escape"&&this.closeMenu()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Q({type:e,selectors:[["app-root"]],decls:26,vars:9,consts:[[1,"site-header",3,"keydown"],[1,"nav"],["routerLink","/home",1,"brand",3,"click"],["type","button","aria-controls","primary-nav","aria-label","Toggle navigation",1,"menu-toggle",3,"click"],[1,"bar"],["id","primary-nav",1,"links"],["routerLink","/products",1,"link",3,"click"],["routerLink","/cart",1,"link",3,"click"],["routerLink","/checkout",1,"link",3,"click"],["routerLink","/orders",1,"link",3,"click"],["routerLink","/wishlist",1,"link",3,"click"],[1,"link",3,"click"],["aria-hidden","true",1,"backdrop",3,"click"],[1,"site-main"],["routerLink","/admin",1,"link"],["routerLink","/seller",1,"link"],["routerLink","/account",1,"link",3,"click"],["routerLink","/admin",1,"link",3,"click"],["routerLink","/seller",1,"link",3,"click"],["routerLink","/login",1,"link",3,"click"],["routerLink","/signup",1,"link",3,"click"]],template:function(n,t){n&1&&(c(0,"header",0),p("keydown",function(a){return t.onKeydown(a)}),c(1,"nav",1)(2,"a",2),p("click",function(){return t.closeMenu()}),d(3,"ShopEase"),l(),c(4,"button",3),p("click",function(){return t.toggleMenu()}),W(5,"span",4)(6,"span",4)(7,"span",4),l(),c(8,"div",5)(9,"a",6),p("click",function(){return t.closeMenu()}),d(10,"Products"),l(),c(11,"a",7),p("click",function(){return t.closeMenu()}),d(12),l(),c(13,"a",8),p("click",function(){return t.closeMenu()}),d(14,"Checkout"),l(),c(15,"a",9),p("click",function(){return t.closeMenu()}),d(16,"Orders"),l(),c(17,"a",10),p("click",function(){return t.closeMenu()}),d(18),l(),c(19,"button",11),p("click",function(){return t.theme.toggle(),t.closeMenu()}),d(20),l(),I(21,Ae,6,2)(22,Se,4,0),l()(),c(23,"div",12),p("click",function(){return t.closeMenu()}),l()(),c(24,"main",13),W(25,"router-outlet"),l()),n&2&&(m(4),te("aria-expanded",t.menuOpen()),m(4),G("open",t.menuOpen()),m(4),K("Cart (",t.cart.itemCount(),")"),m(6),K("Wishlist (",t.wishlist.count(),")"),m(2),ne(t.theme.isDark()?"Light":"Dark"),m(),U(t.auth.isAuthenticated()?21:22),m(2),G("show",t.menuOpen()))},dependencies:[le,pe],styles:['.site-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;-webkit-backdrop-filter:blur(10px) saturate(140%);backdrop-filter:blur(10px) saturate(140%);background:#ffffffb8;border-bottom:1px solid rgba(0,0,0,.06);box-shadow:0 8px 24px #00000014}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{max-width:1150px;margin:0 auto;display:flex;align-items:center;gap:.75rem;justify-content:space-between;padding:.75rem 1rem}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-weight:800;letter-spacing:.2px;text-decoration:none;background:linear-gradient(90deg,var(--primary),var(--accent));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{position:relative;text-decoration:none;color:var(--text);padding:.4rem .6rem;border-radius:.5rem;transition:color .2s ease,background .2s ease}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:after{content:"";position:absolute;left:.6rem;right:.6rem;bottom:.2rem;height:2px;background:linear-gradient(90deg,var(--primary),var(--accent));transform:scaleX(0);transform-origin:left;transition:transform .25s ease}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--primary);background:#1976d214}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;border-radius:.6rem;border:1px solid var(--border);background:var(--surface);cursor:pointer;box-shadow:0 4px 14px #00000014;transition:background .2s ease,box-shadow .2s ease,transform .2s ease;width:40px;height:40px}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{display:block;width:18px;height:2px;background:var(--text);border-radius:2px;transition:transform .2s ease,opacity .2s ease}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[aria-expanded=true][_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){transform:translateY(6px) rotate(45deg)}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[aria-expanded=true][_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){opacity:0}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[aria-expanded=true][_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-6px) rotate(-45deg)}.theme-dark[_ngcontent-%COMP%]   .site-header[_ngcontent-%COMP%]{background:#121212a6;border-bottom:1px solid rgba(255,255,255,.08)}.site-main[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:1rem}@media (max-width: 768px){.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:inline-flex}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{display:none;position:absolute;left:0;right:0;top:100%;margin:0;padding:.5rem 1rem 1rem;background:var(--surface);border-bottom:1px solid var(--border);box-shadow:0 12px 24px #0000001f}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .links.open[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .links.open[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{width:100%}}@media (max-width: 420px){.site-header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:.5rem .75rem}}.backdrop[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#0000004d;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:900}.backdrop.show[_ngcontent-%COMP%]{display:block}']})};se(N,Me).catch(e=>console.error(e));
