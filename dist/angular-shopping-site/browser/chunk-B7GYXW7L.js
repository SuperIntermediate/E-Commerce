import{Eb as c,Fb as u,O as m,a,b as n,ea as d}from"./chunk-HE5TQUO2.js";var f="ng_ecommerce_cart_v1",l=class o{items=d([]);itemCount=c(()=>this.items().reduce((t,e)=>t+e.quantity,0));totalPrice=c(()=>this.items().reduce((t,e)=>t+e.price*e.quantity,0));constructor(){try{let t=localStorage.getItem(f);if(t){let e=JSON.parse(t);Array.isArray(e)&&this.items.set(e)}}catch{}u(()=>{let t=JSON.stringify(this.items());try{localStorage.setItem(f,t)}catch{}})}add(t){let e=this.items(),s=e.findIndex(i=>i.productId===t.productId);if(s>=0){let i=[...e];i[s]=n(a({},i[s]),{quantity:i[s].quantity+t.quantity}),this.items.set(i)}else this.items.set([...e,t])}remove(t){this.items.set(this.items().filter(e=>e.productId!==t))}updateQuantity(t,e){if(e<=0){this.remove(t);return}let s=this.items(),i=s.findIndex(r=>r.productId===t);if(i>=0){let r=[...s];r[i]=n(a({},r[i]),{quantity:e}),this.items.set(r)}}clear(){this.items.set([])}static \u0275fac=function(e){return new(e||o)};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
