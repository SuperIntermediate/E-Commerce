import{a as $}from"./chunk-BGPM6P37.js";import{j as z,k as A,m as Q}from"./chunk-MQBGRNKI.js";import{a as q}from"./chunk-YFYQOU26.js";import{a as j}from"./chunk-YQELJHLD.js";import{a as R}from"./chunk-7GMC5TX5.js";import{a as U}from"./chunk-B7GYXW7L.js";import{e as F,f as W}from"./chunk-SV7RER2E.js";import{Eb as N,Fa as S,Ra as w,Sa as L,T as g,Tb as D,Ua as k,Ub as I,Va as M,Vb as B,Wa as O,Xa as p,Y as u,Ya as n,Z as m,Za as o,_a as E,cb as h,ea as P,eb as _,gb as y,hb as f,kb as a,lb as C,nb as T,qa as x,sa as c,vb as V,wb as v,xb as b}from"./chunk-HE5TQUO2.js";var G=d=>["/products",d],J=(d,t)=>t.id;function K(d,t){if(d&1&&(n(0,"option",8),a(1),v(2,"titlecase"),o()),d&2){let e=t.$implicit;p("value",e),c(),C(b(2,2,e))}}function X(d,t){if(d&1){let e=h();n(0,"article",14),E(1,"img",16),n(2,"div",17)(3,"h2",18),a(4),o(),n(5,"p",19),a(6),v(7,"currency"),o(),n(8,"p",20),a(9),o(),n(10,"p",21),a(11),o(),n(12,"a",22),a(13,"View Details"),o(),n(14,"button",23),_("click",function(){let s=u(e).$implicit,i=y();return m(i.toggleWishlist(s))}),a(15),o(),n(16,"button",24),_("click",function(){let s=u(e).$implicit,i=y();return m(i.addToCart(s))}),a(17,"Add to Cart"),o()()()}if(d&2){let e=t.$implicit,r=y();c(),p("src",e.imageUrl,x)("alt",e.title),c(3),C(e.title),c(2),C(b(7,9,e.price)),c(3),T("Category: ",e.category," \u2022 Popularity: ",e.popularity),c(2),C(e.description),c(),p("routerLink",V(11,G,e.id)),c(3),C(r.isWishlisted(e)?"Remove from Wishlist":"Add to Wishlist")}}function Y(d,t){d&1&&(n(0,"p",15),a(1,"No products found. Try changing filters or search."),o())}var H=class d{productService=g($);allProducts=this.productService.getAll();cart=g(U);router=g(F);auth=g(q);wishlist=g(R);searchQuery=P("");selectedCategory=P("all");sortBy=P("popularity_desc");categories=P(["all",...this.productService.getCategories()]);filteredProducts=N(()=>{let t=[...this.allProducts],e=this.selectedCategory();e!=="all"&&(t=t.filter(i=>i.category===e));let r=this.searchQuery().toLowerCase().trim();r.length>0&&(t=t.filter(i=>i.title.toLowerCase().includes(r)||i.description.toLowerCase().includes(r)||i.category.toLowerCase().includes(r)));let s=this.sortBy();return t.sort((i,l)=>{switch(s){case"price_asc":return i.price-l.price;case"price_desc":return l.price-i.price;case"popularity_desc":default:return l.popularity-i.popularity}}),t});constructor(){}setSort(t){this.sortBy.set(t)}addToCart(t){if(this.auth.isAuthenticated()){this.cart.add(j(t,1));return}let e=this.router.url||"/products";this.router.navigate(["/login"],{queryParams:{redirectUrl:e,action:"add_to_cart",pid:t.id,qty:1}})}toggleWishlist(t){this.wishlist.toggle(t)}isWishlisted(t){return this.wishlist.isWishlisted(t)}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=S({type:d,selectors:[["app-products-list"]],decls:23,vars:4,consts:[["query",""],["categorySel",""],["sortSel",""],[1,"products-page"],[1,"toolbar"],[1,"controls"],["type","text","placeholder","Search products...","aria-label","Search products",3,"input","value"],["aria-label","Filter by category",3,"change","value"],[3,"value"],["aria-label","Sort products",3,"change","value"],["value","popularity_desc"],["value","price_asc"],["value","price_desc"],[1,"grid"],[1,"card"],[1,"empty"],["loading","lazy",3,"src","alt"],[1,"card-body"],[1,"title"],[1,"price"],[1,"meta"],[1,"desc"],[1,"details",3,"routerLink"],[1,"wish",3,"click"],[1,"add",3,"click"]],template:function(e,r){if(e&1){let s=h();n(0,"section",3)(1,"header",4)(2,"h1"),a(3,"Products"),o(),n(4,"div",5)(5,"input",6,0),_("input",function(){u(s);let l=f(6);return m(r.searchQuery.set(l.value))}),o(),n(7,"select",7,1),_("change",function(){u(s);let l=f(8);return m(r.selectedCategory.set(l.value))}),M(9,K,3,4,"option",8,k),o(),n(11,"select",9,2),_("change",function(){u(s);let l=f(12);return m(r.setSort(l.value))}),n(13,"option",10),a(14,"Sort: Popularity"),o(),n(15,"option",11),a(16,"Sort: Price (Low \u2192 High)"),o(),n(17,"option",12),a(18,"Sort: Price (High \u2192 Low)"),o()()()(),n(19,"div",13),M(20,X,18,13,"article",14,J),w(22,Y,2,0,"p",15),o()()}e&2&&(c(5),p("value",r.searchQuery()),c(2),p("value",r.selectedCategory()),c(2),O(r.categories()),c(2),p("value",r.sortBy()),c(9),O(r.filteredProducts()),c(2),L(r.filteredProducts().length===0?22:-1))},dependencies:[B,Q,z,A,W,D,I],styles:[".products-page[_ngcontent-%COMP%]{padding:1rem}.products-page[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem}.products-page[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.products-page[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;gap:.75rem}.products-page[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .products-page[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #ddd;border-radius:.5rem}.products-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #eee;border-radius:.75rem;overflow:hidden;background:#fff}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.75rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .wish[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem .75rem;background:transparent;color:#1976d2;border:1px solid #1976d2;border-radius:4px;cursor:pointer}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .wish[_ngcontent-%COMP%]:hover{background:#1976d214}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem .75rem;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]:hover{background:#0069d9}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.05rem;margin:0 0 .25rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#1b5e20;margin:0 0 .25rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:0 0 .5rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.9rem;color:#333;margin:0 0 .5rem}.products-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:inline-block;padding:.5rem .75rem;background:#1976d2;color:#fff;border-radius:.5rem;text-decoration:none}.products-page[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;color:#666}@media (max-width: 640px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.toolbar[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{flex-wrap:wrap;width:100%}}"]})};export{H as ProductsListComponent};
