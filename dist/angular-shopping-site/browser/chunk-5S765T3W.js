import{b as k,e as L,i as w,j as V,k as $,m as R}from"./chunk-MQBGRNKI.js";import{a as j}from"./chunk-LXBKTAHS.js";import{Eb as F,Fa as A,Ja as C,Ra as S,Rb as T,Sa as x,T as y,Ub as I,Va as O,Vb as N,Wa as b,Xa as s,Y as u,Ya as r,Z as f,Za as n,a as M,cb as v,ea as g,eb as _,gb as m,kb as o,lb as c,ob as P,sa as d,sb as D,wb as h,xb as E}from"./chunk-HE5TQUO2.js";var G=(i,t)=>t.id,H=(i,t)=>t.productId;function z(i,t){if(i&1&&(r(0,"option",8),o(1),n()),i&2){let e=t.$implicit;s("value",e),d(),c(e)}}function J(i,t){if(i&1&&(r(0,"option",8),o(1),n()),i&2){let e=t.$implicit;s("value",e),d(),c(e)}}function K(i,t){if(i&1){let e=v();r(0,"button",15),_("click",function(){u(e);let p=m().$implicit,l=m(2);return f(l.cancel(p.id))}),o(1,"Cancel"),n()}}function Q(i,t){i&1&&(r(0,"span",12),o(1,"\u2014"),n())}function U(i,t){if(i&1&&(r(0,"li"),o(1),h(2,"currency"),n()),i&2){let e=t.$implicit;d(),P(" ",e.title," \xD7 ",e.quantity," \u2014 ",E(2,3,e.price*e.quantity)," ")}}function W(i,t){if(i&1){let e=v();r(0,"tr")(1,"td"),o(2),n(),r(3,"td"),o(4),n(),r(5,"td"),o(6),n(),r(7,"td"),o(8),h(9,"currency"),n(),r(10,"td")(11,"select",9),_("ngModelChange",function(p){let l=u(e).$implicit,B=m(2);return f(B.setEdit(l.id,p))}),C(12,J,2,2,"option",5),n()(),r(13,"td")(14,"button",10),_("click",function(){let p=u(e).$implicit,l=m(2);return f(l.saveStatus(p.id))}),o(15,"Save"),n(),S(16,K,2,0,"button",11)(17,Q,2,0,"span",12),n()(),r(18,"tr",13)(19,"td",14)(20,"ul"),O(21,U,3,5,"li",null,H),n()()()}if(i&2){let e=t.$implicit,a=m(2);d(2),c(e.id),d(2),c(e.date),d(2),c(e.items.length),d(2),c(E(9,9,e.total)),d(3),s("name",D("status-",e.id))("ngModel",a.editedStatus()[e.id]),d(),s("ngForOf",a.statuses),d(4),x(e.status==="PLACED"?16:17),d(5),b(e.items)}}function X(i,t){if(i&1&&(r(0,"table",6)(1,"thead")(2,"tr")(3,"th"),o(4,"Order ID"),n(),r(5,"th"),o(6,"Date"),n(),r(7,"th"),o(8,"Items"),n(),r(9,"th"),o(10,"Total"),n(),r(11,"th"),o(12,"Status"),n(),r(13,"th"),o(14,"Actions"),n()()(),r(15,"tbody"),O(16,W,23,11,null,null,G),n()()),i&2){let e=m();d(16),b(e.filtered())}}function Y(i,t){i&1&&(r(0,"p",7),o(1,"No orders found."),n())}var q=class i{ordersSvc=y(j);orders=g(this.ordersSvc.getAll());statuses=["PLACED","PROCESSING","SHIPPED","DELIVERED","CANCELLED"];editedStatus=g({});filterStatus=g("ALL");refresh(){this.orders.set(this.ordersSvc.getAll())}filtered=F(()=>{let t=this.orders(),e=this.filterStatus();return e==="ALL"?t:t.filter(a=>a.status===e)});setEdit(t,e){let a=M({},this.editedStatus());a[t]=e,this.editedStatus.set(a)}saveStatus(t){let e=this.editedStatus()[t];e&&(this.ordersSvc.updateStatus(t,e),this.refresh())}cancel(t){confirm("Cancel this order?")&&(this.ordersSvc.cancel(t),this.refresh())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=A({type:i,selectors:[["app-admin-orders"]],decls:13,vars:3,consts:[[1,"admin-orders"],[1,"toolbar"],[1,"filters"],["name","filter",3,"ngModelChange","ngModel"],["value","ALL"],[3,"value",4,"ngFor","ngForOf"],[1,"orders-table"],[1,"empty"],[3,"value"],[3,"ngModelChange","ngModel","name"],[1,"primary",3,"click"],[1,"danger"],[1,"muted"],[1,"order-items"],["colspan","6"],[1,"danger",3,"click"]],template:function(e,a){e&1&&(r(0,"section",0)(1,"header",1)(2,"h2"),o(3,"Orders Management"),n(),r(4,"div",2)(5,"label"),o(6," Status "),r(7,"select",3),_("ngModelChange",function(l){return a.filterStatus.set(l)}),r(8,"option",4),o(9,"All"),n(),C(10,z,2,2,"option",5),n()()()(),S(11,X,18,0,"table",6)(12,Y,2,0,"p",7),n()),e&2&&(d(7),s("ngModel",a.filterStatus()),d(3),s("ngForOf",a.statuses),d(),x(a.filtered().length>0?11:12))},dependencies:[N,T,R,V,$,w,k,L,I],styles:[".admin-orders[_ngcontent-%COMP%]{padding:1rem}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.4rem .5rem;border:1px solid #ddd;border-radius:.4rem}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:.5rem .6rem;text-align:left}.order-items[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fafafa}button.primary[_ngcontent-%COMP%]{background:#315efb;color:#fff;border:none;padding:.4rem .75rem;border-radius:.4rem;cursor:pointer}button.danger[_ngcontent-%COMP%]{color:#b00020;border:1px solid #ffccd2;background:#ffe9ec;padding:.4rem .75rem;border-radius:.4rem}.muted[_ngcontent-%COMP%]{color:#999}.empty[_ngcontent-%COMP%]{color:#666}"]})};export{q as AdminOrdersComponent};
