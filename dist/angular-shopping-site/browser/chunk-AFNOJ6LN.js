import{a as G}from"./chunk-BGPM6P37.js";import{a as N,b as T,c as D,d as U,e as q,f as $,g as K,j as R,k as z,l as j,m as B}from"./chunk-MQBGRNKI.js";import{Fa as S,Ja as b,Rb as V,Sb as k,T as h,Ub as F,Vb as I,Xa as u,Y as s,Ya as e,Z as p,Za as t,_a as E,a as M,b as y,cb as P,ea as _,eb as g,gb as v,hb as C,kb as n,lb as f,mb as x,sa as d,wb as O,xb as w,zb as A}from"./chunk-HE5TQUO2.js";function H(a,i){if(a&1&&(e(0,"div",23)(1,"span",24),n(2),t()()),a&2){let r=i.ngIf;d(2),x("Editing product #",r)}}function J(a,i){a&1&&(e(0,"span",24),n(1,"Adding new product"),t())}function Q(a,i){if(a&1&&E(0,"option",25),a&2){let r=i.$implicit;u("value",r)}}function W(a,i){if(a&1){let r=P();e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),O(7,"currency"),t(),e(8,"td"),n(9),t(),e(10,"td"),n(11),t(),e(12,"td")(13,"button",26),g("click",function(){let l=s(r).$implicit,c=v();return p(c.selectForEdit(l))}),n(14,"Edit"),t(),e(15,"button",27),g("click",function(){let l=s(r).$implicit,c=v();return p(c.delete(l.id))}),n(16,"Delete"),t()()()}if(a&2){let r=i.$implicit;d(2),f(r.id),d(2),f(r.title),d(2),f(w(7,5,r.price)),d(3),f(r.category),d(2),f(r.stock)}}var L=class a{productService=h(G);list=_(this.productService.getAll());categories=_(this.productService.getCategories());selectedId=_(null);form=_({title:"",price:0,category:"",imageUrl:"",description:"",popularity:0,stock:0,reviews:[]});refresh(){this.list.set(this.productService.getAll()),this.categories.set(this.productService.getCategories())}updateForm(i,r){this.form.update(o=>y(M({},o),{[i]:r}))}selectForEdit(i){this.selectedId.set(i.id),this.form.set({title:i.title,price:i.price,category:i.category,imageUrl:i.imageUrl,description:i.description,popularity:i.popularity,stock:i.stock,reviews:i.reviews})}clearForm(){this.selectedId.set(null),this.form.set({title:"",price:0,category:"",imageUrl:"",description:"",popularity:0,stock:0,reviews:[]})}save(){let i=this.selectedId(),r=this.form();!r.title||!r.category||(i?this.productService.update(M({id:i},r)):this.productService.create(r),this.refresh(),this.clearForm())}delete(i){confirm("Delete this product?")&&(this.productService.delete(i),this.refresh(),this.selectedId()===i&&this.clearForm())}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=S({type:a,selectors:[["app-admin-products"]],decls:65,vars:12,consts:[["adding",""],["price",""],["stock",""],["pop",""],[1,"admin-products"],[1,"header"],["class","mode",4,"ngIf","ngIfElse"],[1,"product-form",3,"ngSubmit"],[1,"row"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["type","number","step","0.01","name","price","required","",3,"input","ngModel"],["type","text","list","categories","name","category","required","",3,"ngModelChange","ngModel"],["id","categories"],[3,"value",4,"ngFor","ngForOf"],["type","number","name","stock",3,"input","ngModel"],["type","text","name","imageUrl",3,"ngModelChange","ngModel"],["type","number","name","popularity",3,"input","ngModel"],["rows","3","name","description",3,"ngModelChange","ngModel"],[1,"actions"],["type","submit",1,"primary"],["type","button",3,"click"],[1,"products-table"],[4,"ngFor","ngForOf"],[1,"mode"],[1,"pill"],[3,"value"],[3,"click"],[1,"danger",3,"click"]],template:function(r,o){if(r&1){let l=P();e(0,"section",4)(1,"header",5)(2,"h2"),n(3,"Products Management"),t(),b(4,H,3,1,"div",6)(5,J,2,0,"ng-template",null,0,A),t(),e(7,"form",7),g("ngSubmit",function(){return s(l),p(o.save())}),e(8,"div",8)(9,"label"),n(10,"Title"),t(),e(11,"input",9),g("ngModelChange",function(m){return s(l),p(o.updateForm("title",m))}),t()(),e(12,"div",8)(13,"label"),n(14,"Price"),t(),e(15,"input",10,1),g("input",function(){s(l);let m=C(16);return p(o.updateForm("price",m.valueAsNumber||0))}),t()(),e(17,"div",8)(18,"label"),n(19,"Category"),t(),e(20,"input",11),g("ngModelChange",function(m){return s(l),p(o.updateForm("category",m))}),t(),e(21,"datalist",12),b(22,Q,1,1,"option",13),t()(),e(23,"div",8)(24,"label"),n(25,"Stock"),t(),e(26,"input",14,2),g("input",function(){s(l);let m=C(27);return p(o.updateForm("stock",m.valueAsNumber||0))}),t()(),e(28,"div",8)(29,"label"),n(30,"Image URL"),t(),e(31,"input",15),g("ngModelChange",function(m){return s(l),p(o.updateForm("imageUrl",m))}),t()(),e(32,"div",8)(33,"label"),n(34,"Popularity"),t(),e(35,"input",16,3),g("input",function(){s(l);let m=C(36);return p(o.updateForm("popularity",m.valueAsNumber||0))}),t()(),e(37,"div",8)(38,"label"),n(39,"Description"),t(),e(40,"textarea",17),g("ngModelChange",function(m){return s(l),p(o.updateForm("description",m))}),t()(),e(41,"div",18)(42,"button",19),n(43),t(),e(44,"button",20),g("click",function(){return s(l),p(o.clearForm())}),n(45,"Clear"),t()()(),e(46,"h3"),n(47,"All Products"),t(),e(48,"table",21)(49,"thead")(50,"tr")(51,"th"),n(52,"ID"),t(),e(53,"th"),n(54,"Title"),t(),e(55,"th"),n(56,"Price"),t(),e(57,"th"),n(58,"Category"),t(),e(59,"th"),n(60,"Stock"),t(),e(61,"th"),n(62,"Actions"),t()()(),e(63,"tbody"),b(64,W,17,7,"tr",22),t()()()}if(r&2){let l=C(6);d(4),u("ngIf",o.selectedId())("ngIfElse",l),d(7),u("ngModel",o.form().title),d(4),u("ngModel",o.form().price),d(5),u("ngModel",o.form().category),d(2),u("ngForOf",o.categories()),d(4),u("ngModel",o.form().stock),d(5),u("ngModel",o.form().imageUrl),d(4),u("ngModel",o.form().popularity),d(5),u("ngModel",o.form().description),d(3),f(o.selectedId()?"Save Changes":"Add Product"),d(21),u("ngForOf",o.list())}},dependencies:[I,V,k,B,$,R,z,N,K,T,D,j,q,U,F],styles:[".admin-products[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.pill[_ngcontent-%COMP%]{background:#eef3ff;color:#315efb;border:1px solid #cdd7ff;border-radius:999px;padding:.25rem .5rem;font-size:.85rem}.product-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem;margin-bottom:1.5rem}.product-form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.product-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#444}.product-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .product-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .product-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem .6rem;border:1px solid #ddd;border-radius:.4rem;font-size:.95rem}.actions[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;gap:.75rem}.actions[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{background:#315efb;color:#fff;border:none;padding:.5rem .9rem;border-radius:.4rem;cursor:pointer}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #ddd;background:#fff;color:#333;padding:.5rem .9rem;border-radius:.4rem;cursor:pointer}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:.5rem .6rem;text-align:left}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#555}button.danger[_ngcontent-%COMP%]{color:#b00020;border-color:#ffccd2;background:#ffe9ec}"]})};export{L as AdminProductsComponent};
