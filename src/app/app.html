<header class="site-header" (keydown)="onKeydown($event)">
  <nav class="nav">
    <a class="brand" routerLink="/home" (click)="closeMenu()">ShopEase</a>
    <button
      class="menu-toggle"
      type="button"
      (click)="toggleMenu()"
      [attr.aria-expanded]="menuOpen()"
      aria-controls="primary-nav"
      aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div id="primary-nav" class="links" [class.open]="menuOpen()">
      <a class="link" routerLink="/products" (click)="closeMenu()">Products</a>
      <a class="link" routerLink="/cart" (click)="closeMenu()">Cart ({{ cart.itemCount() }})</a>
      <a class="link" routerLink="/checkout" (click)="closeMenu()">Checkout</a>
      <a class="link" routerLink="/orders" (click)="closeMenu()">Orders</a>
      <a class="link" routerLink="/wishlist" (click)="closeMenu()">Wishlist ({{ wishlist.count() }})</a>
      <button class="link" (click)="theme.toggle(); closeMenu()">{{ theme.isDark() ? 'Light' : 'Dark' }}</button>
      @if (auth.isAuthenticated()) {
        @if (auth.isAdmin()) {
          <a class="link" routerLink="/admin" (click)="closeMenu()">Admin</a>
        }
        @if (auth.isSeller()) {
          <a class="link" routerLink="/seller" (click)="closeMenu()">Seller</a>
        }
        <a class="link" routerLink="/account" (click)="closeMenu()">Account</a>
        <button class="link" (click)="auth.logout(); closeMenu()">Logout</button>
      } @else {
        <a class="link" routerLink="/login" (click)="closeMenu()">Login</a>
        <a class="link" routerLink="/signup" (click)="closeMenu()">Signup</a>
      }
    </div>
  </nav>
  <div class="backdrop" [class.show]="menuOpen()" (click)="closeMenu()" aria-hidden="true"></div>
</header>

<main class="site-main">
  <router-outlet></router-outlet>
</main>
